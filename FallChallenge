#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <stdbool.h>

/**
 * Auto-generated code below aims at helping you parse
 * the standard input according to the problem statement.
 **/


/*void    ft_strcpy(char **dst, char *src)
{
    int i = 0;

    while (src[i])
    {
        (*dst)[i] = src[i];
        i++;
    }
    (*dst)[i] = '\0';
}*/
typedef struct building_type
{
    int    type;
    int    id;
    int    x;
    int    y;
    int    n_astronauts;
    int    astronauts[20];
    int    tube;
}   building_struct;

building_struct **buildings;
int             b_counter = 0;
int             n_pod = 0;

int ctoi(char   c)
{
    return (c - 48);
}

int match_types(int in)
{
    for (int i = 0; i < 20; i++)
    {
        if (buildings[in]->astronauts[i])
        {
            fprintf(stderr, "Llega");
            for (int j = 0; j < b_counter; j++)
            {
                if (buildings[j]->type == i + 1)
                    return (j);
            }
        }
    }
    return (0);
}

int parse_properties(char *building_properties, int *in)
{
    int r = 0;

    while (building_properties[*in] >= '0' && building_properties[*in] <= '9')
    {
        r *= 10;
        r += ctoi(building_properties[*in]);
        (*in)++;
    }
    (*in)++;
    return (r);
}

void    add_building(char *building_properties)
{
    int in = 0;

    buildings[b_counter] = malloc(sizeof(building_struct));
    buildings[b_counter]->type = parse_properties(building_properties, &in);
    buildings[b_counter]->id = parse_properties(building_properties, &in);
    buildings[b_counter]->x = parse_properties(building_properties, &in);
    buildings[b_counter]->y = parse_properties(building_properties, &in);
    if (buildings[b_counter]->type == 0)
    {
        buildings[b_counter]->n_astronauts = parse_properties(building_properties, &in);
        for (int i = 0; i < 20; i++)
            buildings[b_counter]->astronauts[i] = 0;
        int j = buildings[b_counter]->n_astronauts;
            while (j > 0)
            {
                int type_astronaut = parse_properties(building_properties, &in);
                buildings[b_counter]->astronauts[type_astronaut - 1]++;
                j--;
            }
    }
    else
        buildings[b_counter]->n_astronauts = 0;
    buildings[b_counter]->tube = 0;
    b_counter++;
}

int main()
{
    buildings = malloc(3 * sizeof(building_struct*));
    // game loop
    while (1) 
    {
        int resources;
        scanf("%d", &resources);
        fprintf(stderr, "Llega");//El scanf se raya porque uso el printf en un bucle???

        int num_travel_routes;
        scanf("%d", &num_travel_routes); fgetc(stdin);
        for (int i = 0; i < num_travel_routes; i++) 
        {
            int building_id_1;
            int building_id_2;
            int capacity;
            scanf("%d%d%d", &building_id_1, &building_id_2, &capacity);
        }

        int num_pods;
        scanf("%d", &num_pods); fgetc(stdin);
        for (int i = 0; i < num_pods; i++) 
        {
            char pod_properties[201];
            scanf("%[^\n]", pod_properties); fgetc(stdin);
        }

        int num_new_buildings;
        scanf("%d", &num_new_buildings); fgetc(stdin);
        for (int i = 0; i < num_new_buildings; i++) 
        {
            char building_properties[501];
            scanf("%[^\n]", building_properties); fgetc(stdin);
            add_building(building_properties);
        }

        for (int i = 0; i < b_counter; i++)
        {
            if (!buildings[i]->tube)
            {
                int dst_route = i + 1;
                if (dst_route >= b_counter)
                    dst_route = 0;
                printf("TUBE %i %i; POD %i %i %i %i %i; ", i, dst_route, n_pod, i, dst_route, i, dst_route);
                n_pod++;
                buildings[i]->tube = 1;
            }
        }
        /*for (int i = 0; i < b_counter; i++)
        {
            int d = match_types(i);
            if (d)
            {
                
                printf("TUBE 0 %i", d);
            }
        }*/
        /*if (num_new_buildings)
        {
            if (buildi)
        }
            printf("TUBE 0 3;POD 2 0 3 0 3\n");*/

        //printf("TUBE 0 1; POD 0 0 1 0 1 0 1; TUBE 0 2; POD 1 0 2 0 2 0 2;\n");

        // Write an action using printf(). DON'T FORGET THE TRAILING \n
        // To debug: fprintf(stderr, "Debug messages...\n");

        // TUBE | UPGRADE | TELEPORT | POD | DESTROY | WAIT
    }

    return 0;
}